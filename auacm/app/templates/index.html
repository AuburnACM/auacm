<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="mainModule" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="mainModule" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="mainModule" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="mainModule"> <!--<![endif]-->
<head>
  <link rel="icon" href="favicon.ico" />
  <title>Auburn ACM</title>

  <!-- Bootstrap stuff -->
  <link rel="stylesheet" href="/static/components/bootstrap/dist/css/bootstrap.min.css">
  <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">-->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body ng-controller="MainController">
  <div ng-class="bernitize">
  <div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle"  ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/#/" class="navbar-brand" id="logo">Auburn ACM</a>
      </div>
      <div class="collapse navbar-collapse" ng-class="!navCollapsed && 'in'">
        <ul class="nav navbar-nav navbar-left">
          <li ng-class="{active: $route.current.activetab == 'blog'}"><a href="/#/">Blog</a></li>
          <li ng-class="{active: $route.current.activetab == 'problems'}"><a href="/#/problems">Problems</a></li>
          <li ng-if="loggedIn" ng-class="{active: $route.current.activetab == 'judge'}"><a href="/#/judge">Judge</a></li>
          <li ng-class="{active: $route.current.activetab == 'ranking'}"><a href="/#/ranking">Rankings</a></li>
          <li ng-class="{active: $route.current.activetab == 'competitions'}"><a href="/#/competitions">Competitions</a></li>
          <li ng-if="loggedIn" ng-class="{active: $route.current.activetab == 'profile'}">
            <a href="/#/profile/user/{% raw %}{{ username }}{% endraw %}">Profile</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right ng-cloak">

          <li ng-if="isAdmin" uib-dropdown>
            <a href="" uib-dropdown-toggle>
              <span class="glyphicon glyphicon-plus"></span>
              <span class="caret"></span>
            </a>
            <ul uib-dropdown-menu>
              <li><a href="/#/users/create">New User</a></li>
              <li><a href="/#/competitions/create">New Competition</a></li>
              <li><a href="/#/problems/create">New Problem</a></li>
              <li><a href="/#/blog/create">New Blog Post</a></li>
            </ul>
          </li>

          <li>
              <a ng-if="loggedIn" href="/#/profile/user/{% raw %}{{ username }}{% endraw %}" class="login-link-box" style="border: 1px solid black;">
                <img src="/api/profile/image/{% raw %}{{ username }}{% endraw %}" class="ranking-profile-picture">
              </a>
          </li>
        
          <!-- Show user options to the user -->
          <li is-open="isOpen" uib-dropdown>
              <a href="" ng-init="displayName = '{{ display_name }}'; loggedIn = {{ logged_in }}"
                  uib-dropdown-toggle style="border: 1px solid black;">
                  {% raw %}{{ displayName }}{% endraw %} <span class="caret"></span>
              </a>
              <!-- If the user is logged in, show their options -->
              <ul ng-if="loggedIn" uib-dropdown-menu>
                <li><a href="/#/settings">Settings</a></li>
                <li><a ng-click="logOut()" href="">Sign out</a></li>
              </ul>

              <!-- If the user isn't logged in, show them the login form -->
              <div ng-if="!loggedIn" ng-click="$event.stopPropagation()" class="login-dropdown" uib-dropdown-menu>
                <p ng-init="failedLogin = false" ng-if="failedLogin" class="failed-login">
                  Incorrect username or password
                </p>

                <form name="logInForm" novalidate ng-submit="logIn()">
                  <!-- Username -->
                  <div class="form-group">
                    <label for="newUserName" class="control-label">Username</label>
                    <input class="form-control" name="username" id="username"
                        type="text" placeholder="Username" ng-model="$parent.loginUsername">
                  </div>

                  <!-- Password -->
                  <div class="form-group">
                    <label for="newUserPassword" class="control-label">Password</label>
                    <input class="form-control" id="newUserPassword" type="password"
                        placeholder="Password" ng-model="$parent.password" name="password">
                  </div>

                  <input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/>
                </form>

                <button class="btn btn-success" style="width:100%;" ng-click="logIn()">Log in</button>
              </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div id="main" class="container">
      <div ng-view></div>
  </div>

  <!-- Our WebSockets library -->
  <script src="/static/js/sockets.js"></script>

  <!-- Static dependences for offline development -->
  <script src="/static/components/angular/angular.js"></script>
  <script src="/static/components/angular-route/angular-route.js"></script>
  <script src="/static/components/angular-sanitize/angular-sanitize.min.js"></script>
  <script src="/static/components/angular-messages/angular-messages.js"></script>
  <script src="/static/components/showdown/dist/showdown.js"></script>
  <script src="/static/components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
  <script src="/static/components/angular-drag-and-drop-lists/angular-drag-and-drop-lists.js"></script>

  <!-- CDN dependencies for production -->
  <!--
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular-route.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular-sanitize.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.7/angular-messages.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.3.0/showdown.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.1.1/ui-bootstrap.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
  -->

  <!-- Modules -->
  <script src="/static/js/modules/mainModule.js"></script>

  <!-- Controllers -->
  <script src="/static/js/controllers/MainController.js"></script>
  <script src="/static/js/controllers/BlogListController.js"></script>
  <script src="/static/js/controllers/CreateBlogPostController.js"></script>
  <script src="/static/js/controllers/BlogPostController.js"></script>
  <script src="/static/js/controllers/ProblemsController.js"></script>
  <script src="/static/js/controllers/JudgeController.js"></script>
  <script src="/static/js/controllers/CompetitionsController.js"></script>
  <script src="/static/js/controllers/ScoreboardController.js"></script>
  <script src="/static/js/controllers/SettingsController.js"></script>
  <script src="/static/js/controllers/ViewProblemController.js"></script>
  <script src="/static/js/controllers/EditProblemController.js"></script>
  <script src="/static/js/controllers/EditCompetitionController.js"></script>
  <script src="/static/js/controllers/TeamController.js"></script>
  <script src="/static/js/controllers/RankingController.js"></script>
  <script src="/static/js/controllers/CreateUserController.js"></script>
  <script src="/static/js/controllers/ProfileController.js"></script>
  <script src="/static/js/controllers/ProfilePictureController.js"></script>

  </div>
</body>
