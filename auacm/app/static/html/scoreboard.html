<div>
  <div class="row">
    <h1 class="pull-left">{{ competition.name }}</h1>
    <div ng-if="isAdmin && !ended" class="dropdown pull-left margin-top margin-left" uib-dropdown>
      <button class="btn btn-default dropdown-toggle" type="button"
          id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="true" uib-dropdown-toggle>
        Manage
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" uib-dropdown-menu>
        <li><a href="/#/competitions/{{ cid }}/edit">Edit</a></li>
        <li><a href="/#/competitions/{{ cid }}/teams">Teams</a></li>
      </ul>
    </div>
    <h2 class="pull-right" ng-show="active || !ended">{{ timeLeft | secondsToHours | date:"H:mm:ss" }}</h2>
  </div>
  <div class="col-md-8 col-md-offset-2 jumbotron" ng-if="!active && !ended">
    <h1>Hang on!</h1>
    <p>The competition will start in {{ timeUntil | secondsToHours | date:"H:mm:ss" }}.</p>
  </div>
  <div class="body" ng-show="active || ended">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Rank</th>
          <th>Team</th>
          <th>Solved</th>
          <th>Time</th>
          <th ng-repeat="name in problemNames"><a href="/#/problems/{{ compProblems[name].shortname }}">{{ name }}</a></th>
        </tr>
      </thead>
      <tr ng-repeat="team in teams | orderBy:['-solved', 'time']">
        <td>{{ team.rank }}</td>
        <td>{{ team.name }}</td>
        <td>{{ team.solved }}</td>
        <td>{{ team.time }}</td>
        <td ng-if="active || ended" ng-repeat="name in problemNames"
            ng-class="{'success': team.problemData[compProblems[name].pid].status === 'correct',
                    'danger': team.problemData[compProblems[name].pid].status === 'incorrect'}">
            <div ng-hide="team.problemData[compProblems[name].pid].status === 'unattempted'">
              {{ team.problemData[compProblems[name].pid].submitCount }}
            <br>
            <small>
              {{ team.problemData[compProblems[name].pid].status == "incorrect" | iif : "--" :
              team.problemData[compProblems[name].pid].problemTime }}</small>
            </div>
        </td>
      </tr>
    </table>
  </div>
</div>
